// <auto-generated />
// Built from: hl7.fhir.r3.core version: 3.0.2
  // Option: "NAMESPACE" = "fhirCsR3"

using System;
using System.Buffers;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.Json;
using System.Text.Json.Serialization;
using fhirCsR3.Models;

namespace fhirCsR3.Serialization
{
  /// <summary>
  /// Common resource converter to support polymorphic deserialization.
  /// </summary>
  public class JsonStreamResourceConverter : JsonConverter<Resource>
  {
    private static readonly byte[] _startObject = Encoding.UTF8.GetBytes("{");
    private static readonly byte[] _endObject = Encoding.UTF8.GetBytes("}");
    private static readonly byte[] _startArray = Encoding.UTF8.GetBytes("[");
    private static readonly byte[] _endArray = Encoding.UTF8.GetBytes("]");
    private static readonly byte[] _comma = Encoding.UTF8.GetBytes(",");
    private static readonly byte[] _propertySep = Encoding.UTF8.GetBytes(":");
    private static readonly byte[] _quote = Encoding.UTF8.GetBytes("\"");

    /// <summary>
    /// Determines whether the specified type can be converted.
    /// </summary>
    public override bool CanConvert(Type objectType) =>
      typeof(Resource).IsAssignableFrom(objectType);

    /// <summary>
    /// Writes a specified value as JSON.
    /// </summary>
    public override void Write(Utf8JsonWriter writer, Resource resource, JsonSerializerOptions options)
    {
      switch (resource)
      {
        case fhirCsR3.Models.Account typedAccount:
          typedAccount.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ActivityDefinition typedActivityDefinition:
          typedActivityDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.AdverseEvent typedAdverseEvent:
          typedAdverseEvent.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.AllergyIntolerance typedAllergyIntolerance:
          typedAllergyIntolerance.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Appointment typedAppointment:
          typedAppointment.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.AppointmentResponse typedAppointmentResponse:
          typedAppointmentResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.AuditEvent typedAuditEvent:
          typedAuditEvent.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Basic typedBasic:
          typedBasic.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Binary typedBinary:
          typedBinary.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.BodySite typedBodySite:
          typedBodySite.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Bundle typedBundle:
          typedBundle.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CapabilityStatement typedCapabilityStatement:
          typedCapabilityStatement.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CarePlan typedCarePlan:
          typedCarePlan.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CareTeam typedCareTeam:
          typedCareTeam.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ChargeItem typedChargeItem:
          typedChargeItem.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Claim typedClaim:
          typedClaim.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ClaimResponse typedClaimResponse:
          typedClaimResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ClinicalImpression typedClinicalImpression:
          typedClinicalImpression.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CodeSystem typedCodeSystem:
          typedCodeSystem.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Communication typedCommunication:
          typedCommunication.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CommunicationRequest typedCommunicationRequest:
          typedCommunicationRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.CompartmentDefinition typedCompartmentDefinition:
          typedCompartmentDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Composition typedComposition:
          typedComposition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ConceptMap typedConceptMap:
          typedConceptMap.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Condition typedCondition:
          typedCondition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Consent typedConsent:
          typedConsent.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Contract typedContract:
          typedContract.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Coverage typedCoverage:
          typedCoverage.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DataElement typedDataElement:
          typedDataElement.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DetectedIssue typedDetectedIssue:
          typedDetectedIssue.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Device typedDevice:
          typedDevice.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DeviceComponent typedDeviceComponent:
          typedDeviceComponent.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DeviceMetric typedDeviceMetric:
          typedDeviceMetric.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DeviceRequest typedDeviceRequest:
          typedDeviceRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DeviceUseStatement typedDeviceUseStatement:
          typedDeviceUseStatement.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DiagnosticReport typedDiagnosticReport:
          typedDiagnosticReport.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DocumentManifest typedDocumentManifest:
          typedDocumentManifest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.DocumentReference typedDocumentReference:
          typedDocumentReference.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.EligibilityRequest typedEligibilityRequest:
          typedEligibilityRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.EligibilityResponse typedEligibilityResponse:
          typedEligibilityResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Encounter typedEncounter:
          typedEncounter.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Endpoint typedEndpoint:
          typedEndpoint.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.EnrollmentRequest typedEnrollmentRequest:
          typedEnrollmentRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.EnrollmentResponse typedEnrollmentResponse:
          typedEnrollmentResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.EpisodeOfCare typedEpisodeOfCare:
          typedEpisodeOfCare.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ExpansionProfile typedExpansionProfile:
          typedExpansionProfile.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ExplanationOfBenefit typedExplanationOfBenefit:
          typedExplanationOfBenefit.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.FamilyMemberHistory typedFamilyMemberHistory:
          typedFamilyMemberHistory.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Flag typedFlag:
          typedFlag.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Goal typedGoal:
          typedGoal.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.GraphDefinition typedGraphDefinition:
          typedGraphDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Group typedGroup:
          typedGroup.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.GuidanceResponse typedGuidanceResponse:
          typedGuidanceResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.HealthcareService typedHealthcareService:
          typedHealthcareService.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ImagingManifest typedImagingManifest:
          typedImagingManifest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ImagingStudy typedImagingStudy:
          typedImagingStudy.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Immunization typedImmunization:
          typedImmunization.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ImmunizationRecommendation typedImmunizationRecommendation:
          typedImmunizationRecommendation.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ImplementationGuide typedImplementationGuide:
          typedImplementationGuide.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Library typedLibrary:
          typedLibrary.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Linkage typedLinkage:
          typedLinkage.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.List typedList:
          typedList.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Location typedLocation:
          typedLocation.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Measure typedMeasure:
          typedMeasure.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MeasureReport typedMeasureReport:
          typedMeasureReport.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Media typedMedia:
          typedMedia.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Medication typedMedication:
          typedMedication.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MedicationAdministration typedMedicationAdministration:
          typedMedicationAdministration.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MedicationDispense typedMedicationDispense:
          typedMedicationDispense.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MedicationRequest typedMedicationRequest:
          typedMedicationRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MedicationStatement typedMedicationStatement:
          typedMedicationStatement.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MessageDefinition typedMessageDefinition:
          typedMessageDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.MessageHeader typedMessageHeader:
          typedMessageHeader.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.NamingSystem typedNamingSystem:
          typedNamingSystem.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.NutritionOrder typedNutritionOrder:
          typedNutritionOrder.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Observation typedObservation:
          typedObservation.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.OperationDefinition typedOperationDefinition:
          typedOperationDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.OperationOutcome typedOperationOutcome:
          typedOperationOutcome.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Organization typedOrganization:
          typedOrganization.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Parameters typedParameters:
          typedParameters.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Patient typedPatient:
          typedPatient.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.PaymentNotice typedPaymentNotice:
          typedPaymentNotice.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.PaymentReconciliation typedPaymentReconciliation:
          typedPaymentReconciliation.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Person typedPerson:
          typedPerson.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.PlanDefinition typedPlanDefinition:
          typedPlanDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Practitioner typedPractitioner:
          typedPractitioner.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.PractitionerRole typedPractitionerRole:
          typedPractitionerRole.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Procedure typedProcedure:
          typedProcedure.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ProcedureRequest typedProcedureRequest:
          typedProcedureRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ProcessRequest typedProcessRequest:
          typedProcessRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ProcessResponse typedProcessResponse:
          typedProcessResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Provenance typedProvenance:
          typedProvenance.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Questionnaire typedQuestionnaire:
          typedQuestionnaire.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.QuestionnaireResponse typedQuestionnaireResponse:
          typedQuestionnaireResponse.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ReferralRequest typedReferralRequest:
          typedReferralRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.RelatedPerson typedRelatedPerson:
          typedRelatedPerson.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.RequestGroup typedRequestGroup:
          typedRequestGroup.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ResearchStudy typedResearchStudy:
          typedResearchStudy.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ResearchSubject typedResearchSubject:
          typedResearchSubject.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.RiskAssessment typedRiskAssessment:
          typedRiskAssessment.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Schedule typedSchedule:
          typedSchedule.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.SearchParameter typedSearchParameter:
          typedSearchParameter.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Sequence typedSequence:
          typedSequence.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ServiceDefinition typedServiceDefinition:
          typedServiceDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Slot typedSlot:
          typedSlot.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Specimen typedSpecimen:
          typedSpecimen.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.StructureDefinition typedStructureDefinition:
          typedStructureDefinition.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.StructureMap typedStructureMap:
          typedStructureMap.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Subscription typedSubscription:
          typedSubscription.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Substance typedSubstance:
          typedSubstance.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.SupplyDelivery typedSupplyDelivery:
          typedSupplyDelivery.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.SupplyRequest typedSupplyRequest:
          typedSupplyRequest.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.Task typedTask:
          typedTask.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.TestReport typedTestReport:
          typedTestReport.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.TestScript typedTestScript:
          typedTestScript.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.ValueSet typedValueSet:
          typedValueSet.SerializeJson(writer, options, true);
          break;
        case fhirCsR3.Models.VisionPrescription typedVisionPrescription:
          typedVisionPrescription.SerializeJson(writer, options, true);
          break;
      }

      writer.Flush();
    }

    /// <summary>
    /// Reads and converts the JSON to a typed object.
    /// </summary>
    public override Resource Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
      return PolymorphicRead(ref reader, typeToConvert, options);
    }

    /// <summary>
    /// Copy raw data from a Utf8JsonReader to a MemoryStream.
    /// </summary>
    private static void WriteReaderValueBytes(ref MemoryStream ms, ref Utf8JsonReader reader)
    {
      if (reader.HasValueSequence)
      {
        byte[] data = new byte[reader.ValueSequence.Length];
        reader.ValueSequence.CopyTo(data);
        ms.Write(data);
        return;
      }

      ms.Write(reader.ValueSpan);
    }

    /// <summary>
    /// Add a JSON seperator token, if necessary.
    /// </summary>
    private static void AddSeperatorIfNeeded(ref MemoryStream ms, ref Utf8JsonReader reader, JsonTokenType last)
    {
      switch (last)
      {
        case JsonTokenType.StartObject:
        case JsonTokenType.StartArray:
          // do nothing
          break;
        case JsonTokenType.PropertyName:
          ms.Write(_propertySep);
          break;
        default:
          ms.Write(_comma);
          break;
      }
    }

    /// <summary>
    /// Read override to handle polymorphic reading of resources.
    /// </summary>
    public static Resource PolymorphicRead(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
      string propertyName = null;
      string resourceType = null;

      if (reader.TokenType != JsonTokenType.StartObject)
      {
        throw new JsonException();
      }

      reader.Read();
      if (reader.TokenType != JsonTokenType.PropertyName)
      {
        throw new JsonException();
      }

      propertyName = reader.GetString();
      if (propertyName == "resourceType")
      {
        reader.Read();
        if (reader.TokenType != JsonTokenType.String)
        {
          throw new JsonException();
        }

        resourceType = reader.GetString();

        return DoPolymorphicRead(ref reader, options, resourceType);
      }

      MemoryStream ms = new MemoryStream(4096);

      ms.Write(Encoding.UTF8.GetBytes($"{{\"{propertyName}\""));
      propertyName = string.Empty;

      int depth = reader.CurrentDepth;
      bool done = false;
      bool nextValueIsResourceType = false;
      JsonTokenType lastToken = JsonTokenType.PropertyName;

      while ((!done) && reader.Read())
      {
        switch (reader.TokenType)
        {
          case JsonTokenType.StartObject:
            AddSeperatorIfNeeded(ref ms, ref reader, lastToken);
            ms.Write(_startObject);
            break;

          case JsonTokenType.EndObject:
            ms.Write(_endObject);
            if (reader.CurrentDepth == (depth - 1))
            {
              done = true;
            }
            break;

          case JsonTokenType.StartArray:
            AddSeperatorIfNeeded(ref ms, ref reader, lastToken);
            ms.Write(_startArray);
            break;

          case JsonTokenType.EndArray:
            ms.Write(_endArray);
            break;

          case JsonTokenType.PropertyName:
            AddSeperatorIfNeeded(ref ms, ref reader, lastToken);
            if (reader.CurrentDepth == depth)
            {
              if (reader.ValueTextEquals("resourceType"))
              {
                nextValueIsResourceType = true;
              }
            }

            ms.Write(_quote);
            WriteReaderValueBytes(ref ms, ref reader);
            ms.Write(_quote);
            break;

          case JsonTokenType.Comment:
            break;

          case JsonTokenType.String:
            AddSeperatorIfNeeded(ref ms, ref reader, lastToken);
            if (nextValueIsResourceType)
            {
              resourceType = reader.GetString();
              nextValueIsResourceType = false;
            }

            ms.Write(_quote);
            WriteReaderValueBytes(ref ms, ref reader);
            ms.Write(_quote);
            break;

          case JsonTokenType.Number:
          case JsonTokenType.True:
          case JsonTokenType.False:
          case JsonTokenType.Null:
          default:
            AddSeperatorIfNeeded(ref ms, ref reader, lastToken);
            WriteReaderValueBytes(ref ms, ref reader);
            break;
        }

        lastToken = reader.TokenType;
      }

      ms.Flush();
      Utf8JsonReader secondary = new Utf8JsonReader(ms.GetBuffer());

      return DoPolymorphicRead(ref secondary, options, resourceType);
    }
    /// <summary>
    /// Sub-function for simpler handling of reader switching.
    /// </summary>
    public static Resource DoPolymorphicRead(ref Utf8JsonReader reader, JsonSerializerOptions options, string resourceType)
    {
      IFhirJsonSerializable target = null;
      switch (resourceType)
      {
        case "Account":
          target = new fhirCsR3.Models.Account();
          target.DeserializeJson(ref reader, options);
          break;
        case "ActivityDefinition":
          target = new fhirCsR3.Models.ActivityDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "AdverseEvent":
          target = new fhirCsR3.Models.AdverseEvent();
          target.DeserializeJson(ref reader, options);
          break;
        case "AllergyIntolerance":
          target = new fhirCsR3.Models.AllergyIntolerance();
          target.DeserializeJson(ref reader, options);
          break;
        case "Appointment":
          target = new fhirCsR3.Models.Appointment();
          target.DeserializeJson(ref reader, options);
          break;
        case "AppointmentResponse":
          target = new fhirCsR3.Models.AppointmentResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "AuditEvent":
          target = new fhirCsR3.Models.AuditEvent();
          target.DeserializeJson(ref reader, options);
          break;
        case "Basic":
          target = new fhirCsR3.Models.Basic();
          target.DeserializeJson(ref reader, options);
          break;
        case "Binary":
          target = new fhirCsR3.Models.Binary();
          target.DeserializeJson(ref reader, options);
          break;
        case "BodySite":
          target = new fhirCsR3.Models.BodySite();
          target.DeserializeJson(ref reader, options);
          break;
        case "Bundle":
          target = new fhirCsR3.Models.Bundle();
          target.DeserializeJson(ref reader, options);
          break;
        case "CapabilityStatement":
          target = new fhirCsR3.Models.CapabilityStatement();
          target.DeserializeJson(ref reader, options);
          break;
        case "CarePlan":
          target = new fhirCsR3.Models.CarePlan();
          target.DeserializeJson(ref reader, options);
          break;
        case "CareTeam":
          target = new fhirCsR3.Models.CareTeam();
          target.DeserializeJson(ref reader, options);
          break;
        case "ChargeItem":
          target = new fhirCsR3.Models.ChargeItem();
          target.DeserializeJson(ref reader, options);
          break;
        case "Claim":
          target = new fhirCsR3.Models.Claim();
          target.DeserializeJson(ref reader, options);
          break;
        case "ClaimResponse":
          target = new fhirCsR3.Models.ClaimResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "ClinicalImpression":
          target = new fhirCsR3.Models.ClinicalImpression();
          target.DeserializeJson(ref reader, options);
          break;
        case "CodeSystem":
          target = new fhirCsR3.Models.CodeSystem();
          target.DeserializeJson(ref reader, options);
          break;
        case "Communication":
          target = new fhirCsR3.Models.Communication();
          target.DeserializeJson(ref reader, options);
          break;
        case "CommunicationRequest":
          target = new fhirCsR3.Models.CommunicationRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "CompartmentDefinition":
          target = new fhirCsR3.Models.CompartmentDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "Composition":
          target = new fhirCsR3.Models.Composition();
          target.DeserializeJson(ref reader, options);
          break;
        case "ConceptMap":
          target = new fhirCsR3.Models.ConceptMap();
          target.DeserializeJson(ref reader, options);
          break;
        case "Condition":
          target = new fhirCsR3.Models.Condition();
          target.DeserializeJson(ref reader, options);
          break;
        case "Consent":
          target = new fhirCsR3.Models.Consent();
          target.DeserializeJson(ref reader, options);
          break;
        case "Contract":
          target = new fhirCsR3.Models.Contract();
          target.DeserializeJson(ref reader, options);
          break;
        case "Coverage":
          target = new fhirCsR3.Models.Coverage();
          target.DeserializeJson(ref reader, options);
          break;
        case "DataElement":
          target = new fhirCsR3.Models.DataElement();
          target.DeserializeJson(ref reader, options);
          break;
        case "DetectedIssue":
          target = new fhirCsR3.Models.DetectedIssue();
          target.DeserializeJson(ref reader, options);
          break;
        case "Device":
          target = new fhirCsR3.Models.Device();
          target.DeserializeJson(ref reader, options);
          break;
        case "DeviceComponent":
          target = new fhirCsR3.Models.DeviceComponent();
          target.DeserializeJson(ref reader, options);
          break;
        case "DeviceMetric":
          target = new fhirCsR3.Models.DeviceMetric();
          target.DeserializeJson(ref reader, options);
          break;
        case "DeviceRequest":
          target = new fhirCsR3.Models.DeviceRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "DeviceUseStatement":
          target = new fhirCsR3.Models.DeviceUseStatement();
          target.DeserializeJson(ref reader, options);
          break;
        case "DiagnosticReport":
          target = new fhirCsR3.Models.DiagnosticReport();
          target.DeserializeJson(ref reader, options);
          break;
        case "DocumentManifest":
          target = new fhirCsR3.Models.DocumentManifest();
          target.DeserializeJson(ref reader, options);
          break;
        case "DocumentReference":
          target = new fhirCsR3.Models.DocumentReference();
          target.DeserializeJson(ref reader, options);
          break;
        case "EligibilityRequest":
          target = new fhirCsR3.Models.EligibilityRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "EligibilityResponse":
          target = new fhirCsR3.Models.EligibilityResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "Encounter":
          target = new fhirCsR3.Models.Encounter();
          target.DeserializeJson(ref reader, options);
          break;
        case "Endpoint":
          target = new fhirCsR3.Models.Endpoint();
          target.DeserializeJson(ref reader, options);
          break;
        case "EnrollmentRequest":
          target = new fhirCsR3.Models.EnrollmentRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "EnrollmentResponse":
          target = new fhirCsR3.Models.EnrollmentResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "EpisodeOfCare":
          target = new fhirCsR3.Models.EpisodeOfCare();
          target.DeserializeJson(ref reader, options);
          break;
        case "ExpansionProfile":
          target = new fhirCsR3.Models.ExpansionProfile();
          target.DeserializeJson(ref reader, options);
          break;
        case "ExplanationOfBenefit":
          target = new fhirCsR3.Models.ExplanationOfBenefit();
          target.DeserializeJson(ref reader, options);
          break;
        case "FamilyMemberHistory":
          target = new fhirCsR3.Models.FamilyMemberHistory();
          target.DeserializeJson(ref reader, options);
          break;
        case "Flag":
          target = new fhirCsR3.Models.Flag();
          target.DeserializeJson(ref reader, options);
          break;
        case "Goal":
          target = new fhirCsR3.Models.Goal();
          target.DeserializeJson(ref reader, options);
          break;
        case "GraphDefinition":
          target = new fhirCsR3.Models.GraphDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "Group":
          target = new fhirCsR3.Models.Group();
          target.DeserializeJson(ref reader, options);
          break;
        case "GuidanceResponse":
          target = new fhirCsR3.Models.GuidanceResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "HealthcareService":
          target = new fhirCsR3.Models.HealthcareService();
          target.DeserializeJson(ref reader, options);
          break;
        case "ImagingManifest":
          target = new fhirCsR3.Models.ImagingManifest();
          target.DeserializeJson(ref reader, options);
          break;
        case "ImagingStudy":
          target = new fhirCsR3.Models.ImagingStudy();
          target.DeserializeJson(ref reader, options);
          break;
        case "Immunization":
          target = new fhirCsR3.Models.Immunization();
          target.DeserializeJson(ref reader, options);
          break;
        case "ImmunizationRecommendation":
          target = new fhirCsR3.Models.ImmunizationRecommendation();
          target.DeserializeJson(ref reader, options);
          break;
        case "ImplementationGuide":
          target = new fhirCsR3.Models.ImplementationGuide();
          target.DeserializeJson(ref reader, options);
          break;
        case "Library":
          target = new fhirCsR3.Models.Library();
          target.DeserializeJson(ref reader, options);
          break;
        case "Linkage":
          target = new fhirCsR3.Models.Linkage();
          target.DeserializeJson(ref reader, options);
          break;
        case "List":
          target = new fhirCsR3.Models.List();
          target.DeserializeJson(ref reader, options);
          break;
        case "Location":
          target = new fhirCsR3.Models.Location();
          target.DeserializeJson(ref reader, options);
          break;
        case "Measure":
          target = new fhirCsR3.Models.Measure();
          target.DeserializeJson(ref reader, options);
          break;
        case "MeasureReport":
          target = new fhirCsR3.Models.MeasureReport();
          target.DeserializeJson(ref reader, options);
          break;
        case "Media":
          target = new fhirCsR3.Models.Media();
          target.DeserializeJson(ref reader, options);
          break;
        case "Medication":
          target = new fhirCsR3.Models.Medication();
          target.DeserializeJson(ref reader, options);
          break;
        case "MedicationAdministration":
          target = new fhirCsR3.Models.MedicationAdministration();
          target.DeserializeJson(ref reader, options);
          break;
        case "MedicationDispense":
          target = new fhirCsR3.Models.MedicationDispense();
          target.DeserializeJson(ref reader, options);
          break;
        case "MedicationRequest":
          target = new fhirCsR3.Models.MedicationRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "MedicationStatement":
          target = new fhirCsR3.Models.MedicationStatement();
          target.DeserializeJson(ref reader, options);
          break;
        case "MessageDefinition":
          target = new fhirCsR3.Models.MessageDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "MessageHeader":
          target = new fhirCsR3.Models.MessageHeader();
          target.DeserializeJson(ref reader, options);
          break;
        case "NamingSystem":
          target = new fhirCsR3.Models.NamingSystem();
          target.DeserializeJson(ref reader, options);
          break;
        case "NutritionOrder":
          target = new fhirCsR3.Models.NutritionOrder();
          target.DeserializeJson(ref reader, options);
          break;
        case "Observation":
          target = new fhirCsR3.Models.Observation();
          target.DeserializeJson(ref reader, options);
          break;
        case "OperationDefinition":
          target = new fhirCsR3.Models.OperationDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "OperationOutcome":
          target = new fhirCsR3.Models.OperationOutcome();
          target.DeserializeJson(ref reader, options);
          break;
        case "Organization":
          target = new fhirCsR3.Models.Organization();
          target.DeserializeJson(ref reader, options);
          break;
        case "Parameters":
          target = new fhirCsR3.Models.Parameters();
          target.DeserializeJson(ref reader, options);
          break;
        case "Patient":
          target = new fhirCsR3.Models.Patient();
          target.DeserializeJson(ref reader, options);
          break;
        case "PaymentNotice":
          target = new fhirCsR3.Models.PaymentNotice();
          target.DeserializeJson(ref reader, options);
          break;
        case "PaymentReconciliation":
          target = new fhirCsR3.Models.PaymentReconciliation();
          target.DeserializeJson(ref reader, options);
          break;
        case "Person":
          target = new fhirCsR3.Models.Person();
          target.DeserializeJson(ref reader, options);
          break;
        case "PlanDefinition":
          target = new fhirCsR3.Models.PlanDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "Practitioner":
          target = new fhirCsR3.Models.Practitioner();
          target.DeserializeJson(ref reader, options);
          break;
        case "PractitionerRole":
          target = new fhirCsR3.Models.PractitionerRole();
          target.DeserializeJson(ref reader, options);
          break;
        case "Procedure":
          target = new fhirCsR3.Models.Procedure();
          target.DeserializeJson(ref reader, options);
          break;
        case "ProcedureRequest":
          target = new fhirCsR3.Models.ProcedureRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "ProcessRequest":
          target = new fhirCsR3.Models.ProcessRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "ProcessResponse":
          target = new fhirCsR3.Models.ProcessResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "Provenance":
          target = new fhirCsR3.Models.Provenance();
          target.DeserializeJson(ref reader, options);
          break;
        case "Questionnaire":
          target = new fhirCsR3.Models.Questionnaire();
          target.DeserializeJson(ref reader, options);
          break;
        case "QuestionnaireResponse":
          target = new fhirCsR3.Models.QuestionnaireResponse();
          target.DeserializeJson(ref reader, options);
          break;
        case "ReferralRequest":
          target = new fhirCsR3.Models.ReferralRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "RelatedPerson":
          target = new fhirCsR3.Models.RelatedPerson();
          target.DeserializeJson(ref reader, options);
          break;
        case "RequestGroup":
          target = new fhirCsR3.Models.RequestGroup();
          target.DeserializeJson(ref reader, options);
          break;
        case "ResearchStudy":
          target = new fhirCsR3.Models.ResearchStudy();
          target.DeserializeJson(ref reader, options);
          break;
        case "ResearchSubject":
          target = new fhirCsR3.Models.ResearchSubject();
          target.DeserializeJson(ref reader, options);
          break;
        case "RiskAssessment":
          target = new fhirCsR3.Models.RiskAssessment();
          target.DeserializeJson(ref reader, options);
          break;
        case "Schedule":
          target = new fhirCsR3.Models.Schedule();
          target.DeserializeJson(ref reader, options);
          break;
        case "SearchParameter":
          target = new fhirCsR3.Models.SearchParameter();
          target.DeserializeJson(ref reader, options);
          break;
        case "Sequence":
          target = new fhirCsR3.Models.Sequence();
          target.DeserializeJson(ref reader, options);
          break;
        case "ServiceDefinition":
          target = new fhirCsR3.Models.ServiceDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "Slot":
          target = new fhirCsR3.Models.Slot();
          target.DeserializeJson(ref reader, options);
          break;
        case "Specimen":
          target = new fhirCsR3.Models.Specimen();
          target.DeserializeJson(ref reader, options);
          break;
        case "StructureDefinition":
          target = new fhirCsR3.Models.StructureDefinition();
          target.DeserializeJson(ref reader, options);
          break;
        case "StructureMap":
          target = new fhirCsR3.Models.StructureMap();
          target.DeserializeJson(ref reader, options);
          break;
        case "Subscription":
          target = new fhirCsR3.Models.Subscription();
          target.DeserializeJson(ref reader, options);
          break;
        case "Substance":
          target = new fhirCsR3.Models.Substance();
          target.DeserializeJson(ref reader, options);
          break;
        case "SupplyDelivery":
          target = new fhirCsR3.Models.SupplyDelivery();
          target.DeserializeJson(ref reader, options);
          break;
        case "SupplyRequest":
          target = new fhirCsR3.Models.SupplyRequest();
          target.DeserializeJson(ref reader, options);
          break;
        case "Task":
          target = new fhirCsR3.Models.Task();
          target.DeserializeJson(ref reader, options);
          break;
        case "TestReport":
          target = new fhirCsR3.Models.TestReport();
          target.DeserializeJson(ref reader, options);
          break;
        case "TestScript":
          target = new fhirCsR3.Models.TestScript();
          target.DeserializeJson(ref reader, options);
          break;
        case "ValueSet":
          target = new fhirCsR3.Models.ValueSet();
          target.DeserializeJson(ref reader, options);
          break;
        case "VisionPrescription":
          target = new fhirCsR3.Models.VisionPrescription();
          target.DeserializeJson(ref reader, options);
          break;
        default:
          target = new fhirCsR3.Models.Resource();
          target.DeserializeJson(ref reader, options);
          break;
      }

      return (Resource)target;
    }
  }
}
